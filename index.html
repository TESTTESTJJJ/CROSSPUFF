<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CROSSPUFFS - Vente de puffs en gros</title>
<style>
  body {
    background: #121212;
    color: white;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 20px;
  }
  header {
    text-align: center;
    font-size: 2.5rem;
    font-weight: 900;
    color: #00ff99;
    letter-spacing: 0.15em;
    margin-bottom: 40px;
    font-family: 'Orbitron', sans-serif;
  }
  .products-container {
    display: flex;
    flex-wrap: wrap;
    gap: 25px;
    justify-content: center;
  }
  .product {
    background: #1f1f1f;
    border-radius: 12px;
    box-shadow: 0 0 12px #00ff99aa;
    padding: 20px;
    max-width: 320px;
    flex: 1 1 300px;
  }
  .product h2 {
    margin-top: 0;
    font-size: 1.7rem;
    color: #00ff99;
  }
  .product p {
    line-height: 1.4;
    font-size: 0.95rem;
    color: #ccc;
  }
  .price-info {
    font-weight: 700;
    margin-top: 12px;
    font-size: 1.1rem;
    color: #fff;
  }
  label, select {
    margin-top: 10px;
    display: block;
    font-weight: 600;
  }
  select {
    margin-bottom: 10px;
    width: 100%;
    padding: 8px 10px;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
    background: #333;
    color: white;
  }
  .total {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 15px;
    color: #00ff99;
  }
  .paypal-button-container {
    margin-top: 8px;
  }
</style>
</head>
<body>

<header>CROSSPUFFS</header>
<div class="products-container" id="products-container"></div>

<script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=EUR"></script>

<script>
// Tableau des produits
const products = [
  {id: "puff9k", name: "Puff 9K", desc: "9000 bouffées – Jetable rechargeable – Port USB-C<br>Double arôme – Format compact – Saveur intense", price: 45},
  {id: "puff15k", name: "Puff 15K", desc: "15000 bouffées – Écran LCD – Airflow réglable<br>Port USB-C – Saveurs longues durée – Rechargeable", price: 45},
  {id: "puff22k", name: "Puff 22K", desc: "22000 bouffées – Autonomie extrême – Format box lumineux<br>Saveurs explosives – Port USB-C – Rechargeable", price: 45},
  {id: "puffice", name: "Puff Ice Menthe", desc: "Menthe glaciale – Format stick fin – Jetable<br>Sans nicotine – Design LED lumineux", price: 50},
  {id: "puffmangue", name: "Puff Mangue", desc: "Saveur mangue sucrée – Format box rechargeable<br>Recharge USB-C – Saveur intense et durable", price: 50},
  {id: "puffnicotine", name: "Puff Sans Nicotine", desc: "1200 bouffées – Format box rechargeable – Saveur fruits rouges<br>0 mg nicotine – Recharge USB-C – Usage multiple", price: 40}
];

// Fonction de calcul des prix avec remise
function calculatePrice(basePrice, qty) {
  if (qty >= 10) return basePrice * qty * 0.82; // -18% + 1 offert
  if (qty >= 5) return basePrice * qty * 0.89;  // -11%
  if (qty >= 3) return basePrice * qty * 0.90;  // -10%
  return basePrice * qty;
}

// Création dynamique des produits HTML
const container = document.getElementById("products-container");
products.forEach(p => {
  const prodDiv = document.createElement("div");
  prodDiv.className = "product";
  prodDiv.dataset.baseprice = p.price;
  prodDiv.innerHTML = `
    <h2>${p.name}</h2>
    <p>${p.desc}</p>
    <p class="price-info">Prix : ${p.price} € / carton de 10</p>
    <label for="qty-${p.id}">Quantité :</label>
    <select id="qty-${p.id}" class="qty-select">
      <option value="1">1 carton</option>
      <option value="3">3 cartons (-10%)</option>
      <option value="5">5 cartons (-11%)</option>
      <option value="10">10 cartons (-18%) + 1 offert</option>
    </select>
    <p class="total">Total : <span id="total-${p.id}">${p.price.toFixed(2)}</span> €</p>
    <div id="paypal-button-${p.id}" class="paypal-button-container"></div>
  `;
  container.appendChild(prodDiv);
});

// Initialisation des produits : gestion quantité + PayPal
function setupProduct(qtyId, totalId, paypalId, productName, basePrice) {
  const qtySelect = document.getElementById(qtyId);
  const totalSpan = document.getElementById(totalId);

  function updateTotal() {
    const qty = parseInt(qtySelect.value);
    totalSpan.textContent = calculatePrice(basePrice, qty).toFixed(2);
  }
  qtySelect.addEventListener("change", updateTotal);
  updateTotal();

  paypal.Buttons({
    style: { layout: 'vertical', color: 'green', shape: 'rect', label: 'pay' },
    createOrder: (data, actions) =>
      actions.order.create({
        purchase_units: [{
          description: productName,
          amount: { currency_code: "EUR", value: calculatePrice(basePrice, parseInt(qtySelect.value)).toFixed(2) }
        }]
      }),
    onApprove: (data, actions) =>
      actions.order.capture().then(details => alert(`Merci pour votre achat, ${details.payer.name.given_name} !`))
  }).render('#' + paypalId);
}

// Setup pour chaque produit
products.forEach(p => {
  setupProduct(`qty-${p.id}`, `total-${p.id}`, `paypal-button-${p.id}`, p.name, p.price);
});
</script>

</body>
</html>
